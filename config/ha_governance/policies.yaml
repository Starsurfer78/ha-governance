policies:
  # SAFETY: Heizung aus, wenn Fenster offen
  - name: heating_window_protection_wohnzimmer
    priority: 100
    when:
      binary_sensor.window_wohnzimmer_any_open: "on"
      climate.wohnzimmer: "heat"
    enforce:
      service: climate.turn_off
      target:
        entity_id: climate.wohnzimmer

  # ENERGY: Standby-Mediensteckdose aus bei Idle-Zustand
  - name: media_standby_cutoff_wohnzimmer
    priority: 80
    when:
      binary_sensor.media_wohnzimmer_idle: "on"
      switch.media_wohnzimmer: "on"
    enforce:
      service: switch.turn_off
      target:
        entity_id: switch.media_wohnzimmer

  # COMFORT: Nachtmodus begrenzt Helligkeit im Schlafzimmer
  - name: bedroom_nightmode_brightness_limit
    priority: 60
    when:
      input_boolean.nightmode: "on"
      light.schlafzimmer_main.brightness: ">200"
    enforce:
      service: light.turn_on
      target:
        entity_id: light.schlafzimmer_main
      data:
        brightness: 200

  # DRY-RUN: Testpolicy, die nur loggt und nichts ausf√ºhrt
  - name: dry_run_example_policy
    priority: 10
    dry_run: true
    when:
      input_boolean.test_policy_trigger: "on"
    enforce:
      service: homeassistant.turn_off
      target:
        entity_id: input_boolean.test_policy_trigger
